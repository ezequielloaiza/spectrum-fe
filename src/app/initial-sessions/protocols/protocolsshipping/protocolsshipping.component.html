<br />
<div class="form-options">
  <span class="sp-title">{{ "Shippings Protocols" | translate }}</span>
</div>
<br />
<div class="row" *ngFor="let protocol of protocols">
  <div class="w-100 border p-3 mb-3">
    <div class="d-flex w-100 border-bottom">
      <div class="w-50 mr-3">
        <span class="font-weight-bold">{{ protocol.label | translate }}</span>
      </div>
      <div class="w-46">
        <span class="font-weight-bold">{{ "Supplier" | translate }}</span>
      </div>
    </div>

    <div class="d-flex align-items-center w-100 pt-2 pb-1" *ngFor="let value of protocol.values; let pos = index">
      <div class="w-50 mr-3">
        <div class="input-value">
          <input
            *ngIf="
              protocol.label === 'Recipient' ||
              protocol.label === 'Shipping Method' ||
              protocol.label === 'Account Number for Shipping Carrier'
            "
            type="text"
            [hidden]="!modeEdit"
            class="form-control"
            placeholder="{{ protocol.placeHolder | translate }}"
            [(ngModel)]="value.content"
          />
          <textarea
            *ngIf="
              protocol.label === 'Shipping Address' ||
              protocol.label === 'Comments' ||
              protocol.label === 'Shipping Details'
            "
            style="overflow-x: hidden;"
            type="text"
            class="form-control"
            placeholder="{{ protocol.placeHolder | translate }}"
            [(ngModel)]="value.content"
          ></textarea>

          <!--Shipping Frecuency-->
          <div *ngIf="protocol.label === 'Shipping Frecuency'" class="mb-2 mr-sm-2 mb-sm-0 d-flex align-items-center">
            <div class="custom-control-inline">
              <div class="custom-control custom-radio">
                <input
                  type="radio"
                  id="{{ 'customRadioM' + pos }}"
                  name="{{ 'shippingFrecuency' + pos }}"
                  class="custom-control-input"
                  (change)="assignShippingFrecuency(protocol, 1, pos)"
                />
                <label
                  class="custom-control-label"
                  for="{{ 'customRadioM' + pos }}"
                  >{{ "Monthly" | translate }}</label
                >
              </div>
              <div
                style="margin-left: 10px;"
                class="custom-control custom-radio"
              >
                <input
                  type="radio"
                  id="{{ 'customRadioB' + pos }}"
                  name="{{ 'shippingFrecuency' + pos }}"
                  class="custom-control-input"
                  (change)="assignShippingFrecuency(protocol, 2, pos)"
                />
                <label
                  class="custom-control-label"
                  for="{{ 'customRadioB' + pos }}"
                  >{{ "Biweekly" | translate }}</label
                >
              </div>
              <div
                style="margin-left: 10px;"
                class="custom-control custom-radio"
              >
                <input
                  type="radio"
                  id="{{ 'customRadioW' + pos }}"
                  name="{{ 'shippingFrecuency' + pos }}"
                  class="custom-control-input"
                  (change)="assignShippingFrecuency(protocol, 3, pos)"
                />
                <label
                  class="custom-control-label"
                  for="{{ 'customRadioW' + pos }}"
                  >{{ "Weekly" | translate }}</label
                >
              </div>
            </div>
            <!--<span>{{ shippingFrecuency.value }}</span>-->
            <select
              *ngIf="value.showB === 'true'"
              [(ngModel)]="value.content"
              class="form-control"
              name="{{ 'shippingFrecuencyB' + pos }}"
            >
              <option value="" [selected]="true" translate>Select value</option>
              <option
                *ngFor="let biweekly of listBiweekly"
                value="{{ biweekly }}"
                >{{ biweekly | translate }}</option
              >
            </select>
            <select
              *ngIf="value.showW === 'true'"
              [(ngModel)]="value.content"
              class="form-control"
              name="{{ 'shippingFrecuencyW' + pos }}"
            >
              <option value="" [selected]="true" translate>Select value</option>
              <option *ngFor="let weekly of listWeekly" value="{{ weekly }}">{{
                weekly | translate
              }}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="w-46">
        <div class="d-inline-block w-100" ngbDropdown autoClose="outside">
          <button
            class="btn border-type w-100 text-left"
            ngbDropdownToggle
            required
            [disabled]="!validContent(protocol,pos)"
          >
            <div class="text-overflow">{{ getNamesTypeList(value) }}</div>
          </button>
          <ul
            ngbDropdownMenu
            class="w-100 p-3 dropdown-list"
            aria-labelledby="dropdownManual"
          >
            <div class="select-type">
              <li *ngFor="let supplier of suppliers; index as i">
                <div>
                  <div class="custom-control custom-checkbox" data-toggle="tooltip" data-placement="left" title="{{ 'If it is disabled, it was previously selected' | translate }}">
                    <input attr.id="{{protocol.label}}-{{ i }}-{{ pos }}"
                      type="checkbox" name="checkboxGroupAll"
                      [checked]="checkedSupplier(protocol, value, supplier)"
                      (click)="selectSupplier(supplier.idSupplier, protocol, value)"
                      class="custom-control-input"
                      [disabled]="disabledSupplier(protocol, value, supplier)"
                    />
                    <label
                      class="custom-control-label"
                      for="{{ protocol.label }}-{{ i }}-{{ pos }}"
                    ></label>
                    <span class="tcs-text-overflow">
                      {{ supplier.companyName | titlecase }}
                    </span>
                  </div>
                </div>
              </li>
            </div>
          </ul>
        </div>
      </div>
      <div class="trash" [hidden]="protocol.values.length === 1">
        <span
          class="fa fa-trash"
          [ngClass]="{
            top:
              protocol.label === 'Shipping Address' ||
              protocol.label === 'Comments' ||
              protocol.label === 'Shipping Details'
          }"
          placement="top"
          ngbTooltip="{{ 'Delete protocol value' | translate }}"
          (click)="removeValue(protocol, pos)"
        ></span>
      </div>
    </div>
    <div>
      <button type="button" class="btn btn-main" [hidden]="suppliers.length === protocol.selectedSuppliers.length || protocol.values.length === suppliers.length" (click)="addValue(protocol)">{{ 'Add' | translate }}
        <i class="fa fa-plus-circle ml-2"></i>
      </button>
    </div>
  </div>
</div>

<br />
<div class="footer-form">
  <button class="btn btn-secondary" (click)="Skip()">
    {{ "Skip" | translate }}&nbsp;
    <i class="fa fa-times"></i>
  </button>
  &nbsp;&nbsp;
  <button class="btn btn-main" (click)="save()" [disabled]="!formIsValid()">
    {{ "Save & Next" | translate }}&nbsp;
    <i class="fa fa-arrow-right"></i>
  </button>
</div>

<app-page-header class="page-header-fixed" [heading]="'Protocol'" [icon]="'fa-edit'"></app-page-header>

<div class="container bootstrap snippet pl-5 pr-3">
  <div class="row">
    <ngb-tabset (tabChange)="beforeChange($event)">
      <ngb-tab id="{{supplier.idSupplier}}" *ngFor="let supplier of suppliers">
        <ng-template ngbTabTitle><b>{{ supplier.companyName }}</b></ng-template>
        <ng-template ngbTabContent>
          <div class="border-tab" [formGroup]="protocolForm">
            <div class="text-right pb-3">
              <button type="button" class="btn btn-main mr-3" *ngIf="!edit" (click)="enableEdit()">
                Edit
              </button>
              <button type="button" class="btn btn-secondary mr-3" [disabled]="saving" *ngIf="edit" (click)="cancel()">
                Cancel
              </button>
              <button
                type="button"
                class="btn btn-main"
                *ngIf="edit"
                (click)="update()"
              >
                Save
              </button>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>ACC Number</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="accNumber"   
                  maxlength="254"         
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.accNumber }">{{ protocol.accNumber ? protocol.accNumber :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>Country</label>
                <div>
                  <ng-select
                    [items]="countries"
                    [searchable]="true"
                    bindValue="idCountry"
                    bindLabel="name"
                    formControlName="country"
                    *ngIf="edit"
                  >
                    <ng-template ng-label-tmp let-item="item">
                      <div>
                        <span>{{ item.name }}</span>
                      </div>
                    </ng-template>
                    <ng-template ng-option-tmp let-item="item" let-index="index" let-search="searchTerm">
                      <div>
                        <span [ngOptionHighlight]="search">{{ item.name }}</span>
                      </div>
                    </ng-template>
                  </ng-select>
                </div>
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.countryName }">{{ protocol.countryName ? protocol.countryName :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>Businness Name</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="businessName"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.businessName }">{{ protocol.businessName ? protocol.businessName :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>Recipient</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="recipient"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.recipient }">{{ protocol.recipient ? protocol.recipient :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>Shipping Address</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="shippingAddress"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingAddress }">{{ protocol.shippingAddress ? protocol.shippingAddress :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>DMV</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="dmv"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.dmv }">{{ protocol.dmv ? protocol.dmv :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>Shipping Frecuency</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="shippingFrecuency"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingFrecuency }">{{ protocol.shippingFrecuency ? protocol.shippingFrecuency :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>Shipping Method</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="shippingMethod"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingMethod }">{{ protocol.shippingMethod ? protocol.shippingMethod :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>Account Number for Shipping Carrier</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="accountNumber"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.accountNumber }">{{ protocol.accountNumber ? protocol.accountNumber :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>Shipping Details</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="shippingDetail"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingDetail }">{{ protocol.shippingDetail ? protocol.shippingDetail :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>Comments</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="comment"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.comment }">{{ protocol.comment ? protocol.comment :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>Email Comments</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="emailComment"
                  maxlength="254"
                  *ngIf="edit"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.emailComment }">{{ protocol.emailComment ? protocol.emailComment :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
          </div>       
        </ng-template>
      </ngb-tab>
    </ngb-tabset>
  </div>
</div>


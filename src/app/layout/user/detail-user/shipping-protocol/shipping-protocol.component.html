<div class="container bootstrap snippet pl-5 pr-3">
  <div class="row">
    <ngb-tabset (tabChange)="beforeChange($event)">
      <ngb-tab id="{{supplier.idSupplier}}" *ngFor="let supplier of suppliers">
        <ng-template ngbTabTitle><b>{{ supplier.companyName }}</b></ng-template>
        <ng-template ngbTabContent>
          <div class="border-tab" [formGroup]="protocolForm">
            <div class="text-right pb-3">
              <button type="button" class="btn btn-main mr-3" *ngIf="!edit" (click)="enableEdit()">{{ 'Edit' | translate }}
                <i class="fa fa-edit"></i>
              </button>
              <button type="button" class="btn btn-success btn-xs" *ngIf="!edit" [disabled]="!download" (click)="downloadProtocol()">{{ 'Download PDF' | translate }}
                <i class="fa fa-download"></i>
              </button>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'ACC Number' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="accNumber"
                  maxlength="120"
                  *ngIf="edit"
                  placeholder="{{ 'Enter ACC number' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.accNumber }">{{ protocol.accNumber ? protocol.accNumber :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Country' | translate }}</label>
                <div class="mb-2 mr-sm-2 mb-sm-0">
                  <ng-select
                    [items]="countries"
                    [searchable]="true"
                    bindValue="idCountry"
                    bindLabel="name"
                    formControlName="country"
                    *ngIf="edit"
                    placeholder="{{ 'Enter country' | translate }}"
                  >
                  </ng-select>
                </div>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.countryName }">{{ protocol.countryName ? protocol.countryName :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Business Name' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="businessName"
                  maxlength="120"
                  *ngIf="edit"
                  placeholder="{{ 'Enter business name' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.businessName }">{{ protocol.businessName ? protocol.businessName :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Recipient' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="recipient"
                  maxlength="120"
                  *ngIf="edit"
                  placeholder="{{ 'Enter recipient' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.recipient }">{{ protocol.recipient ? protocol.recipient :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Shipping Address' | translate }}</label>
                <textarea style="overflow-x: hidden;"
                  type="text"
                  class="form-control"
                  formControlName="shippingAddress"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter shipping address' | translate }}">
                </textarea>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingAddress }">{{ protocol.shippingAddress ? protocol.shippingAddress :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Shipping Frecuency' | translate }}</label>
                <div *ngIf="edit" class="mb-2 mr-sm-2 mb-sm-0">
                  <div class="custom-control-inline">
                    <div class="custom-control custom-radio">
                      <input type="radio" id="customRadio1" name="shippingFrecuency" class="custom-control-input" (change)="assignShippingFrecuency(1)" [checked]="valueFrecuency === 'Monthly'">
                      <label class="custom-control-label" for="customRadio1">{{ 'Monthly' | translate }}</label>
                    </div>
                    <div style="margin-left: 10px;" class="custom-control custom-radio">
                      <input type="radio" id="customRadio2" name="shippingFrecuency" class="custom-control-input" (change)="assignShippingFrecuency(2)" [checked]="valueFrecuency === 'Biweekly'">
                      <label class="custom-control-label" for="customRadio2">{{ 'Biweekly' | translate }}</label>
                    </div>
                    <div style="margin-left: 10px;" class="custom-control custom-radio">
                      <input type="radio" id="customRadio3" name="shippingFrecuency" class="custom-control-input" (change)="assignShippingFrecuency(3)" [checked]="valueFrecuency === 'Weekly'">
                      <label class="custom-control-label" for="customRadio3">{{ 'Weekly' | translate }}</label>
                    </div>
                  </div>
                  <!--<span>{{ shippingFrecuency.value }}</span>-->
                  <select
                    *ngIf="valueFrecuency === 'Biweekly'"
                    class="form-control"
                    name="shippingFrecuencyB"
                    formControlName="shippingFrecuencyB">
                      <option *ngFor="let biweekly of listBiweekly" value="{{biweekly}}">{{ biweekly | translate }}</option>
                  </select>
                  <select
                    *ngIf="valueFrecuency === 'Weekly'"
                    class="form-control"
                    name="shippingFrecuencyW"
                    formControlName="shippingFrecuencyW">
                      <option *ngFor="let weekly of listWeekly" value="{{weekly}}">{{ weekly | translate }}</option>
                  </select>
                </div>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingFrecuency }" translate>{{ protocol.shippingFrecuency ? protocol.shippingFrecuency :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Shipping Method' | translate }}</label>
                <select
                *ngIf="edit"
                class="form-control"
                name="shippingMethod"
                formControlName="shippingMethod">
                  <option *ngFor="let shippingMethod of listShippingMethod" value="{{shippingMethod}}">{{ shippingMethod | translate }}</option>
                </select>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingMethod }">{{ protocol.shippingMethod ? protocol.shippingMethod :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Shipping Details' | translate }}</label>
                <textarea style="overflow-x: hidden;"
                  type="text"
                  class="form-control"
                  formControlName="shippingDetail"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter shipping detail' | translate }}"
                ></textarea>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.shippingDetail }">{{ protocol.shippingDetail ? protocol.shippingDetail :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Account Number for Shipping Carrier' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="accountNumber"
                  maxlength="120"
                  *ngIf="edit"
                  placeholder="{{ 'Enter account number for shipping carrier' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.accountNumber }">{{ protocol.accountNumber ? protocol.accountNumber :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Comments' | translate }}</label>
                <textarea style="overflow-x: hidden;"
                  type="text"
                  class="form-control"
                  formControlName="comment"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter comments' | translate }}"
                ></textarea>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.comment }">{{ protocol.comment ? protocol.comment :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">

              <div class="form-group pr-3 half-flex">
                <label>DMV</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="dmv"
                  maxlength="120"
                  *ngIf="edit"
                  placeholder="{{ 'Enter DMV' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.dmv }">{{ protocol.dmv ? protocol.dmv :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Email Comments' | translate }}</label>
                <textarea style="overflow-x: hidden;"
                  type="text"
                  class="form-control"
                  formControlName="emailComment"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter email comments' | translate }}"
                ></textarea>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.emailComment }">{{ protocol.emailComment ? protocol.emailComment :
                    'Unassigned'
                  }}</span>
                </div>
              </div>
            </div>
            <div class="text-right pb-3">
              <button type="button" class="btn btn-secondary mr-3" [disabled]="saving" *ngIf="edit" (click)="cancel()">{{ 'Cancel' | translate }}&nbsp;
                <i class="fa fa-times"></i>
              </button>
              <button
                type="button"
                class="btn btn-main"
                *ngIf="edit"
                [disabled]="saving"
                (click)="update()"
              >{{ 'Save' | translate }}&nbsp;
                <i class="fa fa-save"></i>
              </button>
            </div>
          </div>
        </ng-template>
      </ngb-tab>
    </ngb-tabset>
  </div>
</div>

<app-page-header class="page-header-fixed" [heading]="'Profile'" [icon]="'fa-edit'"></app-page-header>
<div class="container bootstrap snippet">
  <div class="row">
    <!--/col-12-->
    <div class="col-sm-12">
      <hr>
      <form [formGroup]="form">
        <ngb-tabset>
          <ngb-tab>
            <ng-template ngbTabTitle>
              {{ 'Account Info' | translate }}
            </ng-template>
            <ng-template ngbTabContent>
              <br>
              <div class="container-edit">
                <button class="btn btn-main btn-edit" (click)="editAccount()" [disabled]="canEditAccount">{{ 'Edit' | translate }}&nbsp;
                  <i class="fa fa-edit"></i>
                </button>
              </div>
              <div class="form-options">
                <h4>{{ 'Account Info' | translate }}</h4>
              </div>
              <br>
              <div class="row">
                <div class="col-xl-12">
                  <fieldset class="form-group">
                    <label>{{ 'Username' | translate }}</label>
                    <div class="input-group mb-2 mr-sm-2 mb-sm-0">
                      <h6 class="label-disabled">{{ user.userResponse.username }}</h6>
                      <input type="text" class="form-control" name="username" formControlName="username" placeholder="Username"
                        aria-describedby="usernameHelpBlock" readonly required>
                    </div>
                    <small id="usernameHelpBlock" class="form-text text-muted">
                      {{'You can not edit your username' | translate }}
                    </small>
                  </fieldset>
                  <div class="message-error" [hidden]="username.valid || username.pristine">
                    <span>{{ 'Username is required' | translate }}</span>
                  </div>
                </div>
                <div class="col-xl-6">
                  <fieldset class="form-group">
                    <label for="oldPassword" class="control-label">{{'Old Password' | translate}}</label>&nbsp;&nbsp;
                    <i class="fa fa-lock" placement="top" ngbTooltip="{{'For security your password is encrypted' | translate}}"></i>
                    <h6 class="label-disabled">{{ 'The password is secret' | translate }}</h6>
                    <input type="password" class="form-control" name="oldPassword" formControlName="oldPassword" aria-describedby="passwordHelpBlock" required>
                  </fieldset>
                  <div class="message-error" [hidden]="oldPassword.valid || oldPassword.pristine">
                    <span>{{ 'Password is not valid' | translate }}</span>
                  </div>
                </div>
                <div class="col-xl-6"></div>
                <div class="col-xl-6">
                  <fieldset class="form-group">
                    <label for="password" class="control-label">{{'Password' | translate}}</label>&nbsp;&nbsp;
                    <i class="fa fa-lock" placement="top" ngbTooltip="{{'For security your password is encrypted' | translate}}"></i>
                    <h6 class="label-disabled">{{ 'The password is secret' | translate }}</h6>
                    <input type="password" class="form-control" name="password" formControlName="password" aria-describedby="passwordHelpBlock"
                      required>
                  </fieldset>
                  <div class="message-error" [hidden]="password.valid || password.pristine">
                    <span>{{ 'Password is not valid' | translate }}</span>
                  </div>
                </div>
                <div class="col-xl-6">
                  <fieldset class="form-group">
                    <label for="confirmedPassword" class="control-label">{{'Confirm Password' | translate}}</label>&nbsp;&nbsp;
                    <i class="fa fa-lock" placement="top" ngbTooltip="{{'For security your password is encrypted' | translate}}"></i>
                    <h6 class="label-disabled">{{ 'The password is secret' | translate }}</h6>
                    <input type="password" class="form-control" name="confirmedPassword" formControlName="confirmedPassword"
                      aria-describedby="passwordHelpBlock" [ngStyle]="{'border-left': (form.get(['password']).value != form.get(['confirmedPassword']).value
                                     && form.get(['confirmedPassword']).value != null
                                     || form.get(['password']).value === ''
                                     || form.get(['confirmedPassword']).value === '') === false ? '5px solid green' : '5px solid red' }"
                      required>
                  </fieldset>
                  <div class="message-error" *ngIf="form.get(['password']).value != form.get(['confirmedPassword']).value
                              && form.get(['confirmedPassword']).value != null">
                    <span>{{ 'Passwords do not match' | translate }}</span>
                  </div>
                </div>
              </div>
              <br>
              <div class="footer-form">
                <button class="btn btn-secondary" (click)="editAccount()">{{ 'Cancel' | translate }}&nbsp;
                  <i class="fa fa-times"></i>
                </button>
                &nbsp;&nbsp;
                <button class="btn btn-main" (click)="saveAccount()" [disabled]="form.get(['password']).value != form.get(['confirmedPassword']).value
                                    && form.get(['confirmedPassword']).value != null
                                    || form.get(['password']).value === ''
                                    || form.get(['confirmedPassword']).value === ''
                                    || form.get(['oldPassword']).value === ''">{{ 'Save' | translate }}&nbsp;
                  <i class="fa fa-save"></i>
                </button>
              </div>
            </ng-template>
          </ngb-tab>
        </ngb-tabset>
        <br>
      </form>
      <hr>
      <!--/tab-pane-->
    </div>
    <!--/tab-content-->
  </div>
  <!--/col-9-->
</div>
<!--/row-->

<div class="container bootstrap snippet pl-5 pr-3">
  <div class="row">
    <ngb-tabset (tabChange)="beforeChange($event)">
      <ngb-tab id="{{supplier.idSupplier}}" *ngFor="let supplier of suppliers">
        <ng-template ngbTabTitle><b>{{ supplier.companyName }}</b></ng-template>
        <ng-template ngbTabContent>
          <div class="border-tab" [formGroup]="protocolForm">
            <div class="text-right pb-3">
              <button type="button" class="btn btn-main mr-3" *ngIf="!edit" (click)="enableEdit()">{{ 'Edit' | translate }}
                <i class="fa fa-download"></i>
              </button>
              <button type="button" class="btn btn-success btn-xs" *ngIf="!edit && protocol" (click)="downloadProtocol()">{{ 'Download PDF' | translate }}
                <i class="fa fa-download"></i>
              </button>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Maximum Amount to Declare for Customs' | translate }}</label>
                <div *ngIf="edit && editField" class="input-group-append">
                  <span class="input-group-text">$</span>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="maximumAmount"
                    *ngIf="edit && editField"
                    required
                    placeholder="{{ 'Enter maximum amount' | translate }}"
                  />
                </div>
                <div *ngIf="!edit || !editField">
                  <span translate [ngClass]="{ unassigned: !protocol.maximumAmount }">{{ protocol.maximumAmount ? (protocol.maximumAmount | currency : "USD $") :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Fixed Prices' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="fixedPrices"
                  maxlength="254"
                  required
                  *ngIf="edit && editField"
                  placeholder="{{ 'Enter fixed prices' | translate }}"
                />
                <div *ngIf="!edit || !editField">
                  <span [ngClass]="{ unassigned: !protocol.fixedPrices }">{{ protocol.fixedPrices ? protocol.fixedPrices :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Spectrum Proforma' | translate }}</label>
                <div *ngIf="edit" class="col col-xl-1 col-lg-1">
                  <div class="custom-control custom-radio">
                    <input type="radio" id="customRadio1" name="spectrumProforma" class="custom-control-input" (change)="assignSpectrumProforma(true)" [checked]="protocol ? protocol.spectrumProforma : false" required>
                    <label class="custom-control-label" for="customRadio1">{{ 'Yes' | translate }}</label>
                  </div>
                </div>
                <div *ngIf="edit" class="col col-xl-1 col-lg-1">
                  <div class="custom-control custom-radio">
                    <input type="radio" id="customRadio2" name="spectrumProforma" class="custom-control-input" (change)="assignSpectrumProforma(false)" [checked]="protocol ? !protocol.spectrumProforma : true" required>
                    <label class="custom-control-label" for="customRadio2">{{ 'No' | translate }}</label>
                  </div>
                </div>
                <div *ngIf="!edit">
                  <span translate [ngClass]="{ unassigned: !protocol.spectrumProforma }">{{ protocol.spectrumProforma ? protocol.spectrumProforma == true ? 'Yes' : 'No' :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Additional Documents' | translate }}</label>
                <div>
                  <input
                    type="text"
                    class="form-control"
                    formControlName="additionalDocuments"
                    maxlength="254"
                    placeholder="{{ 'Enter additional documents' | translate }}"
                    *ngIf="edit"
                    required
                  />
                </div>
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.additionalDocuments }">{{ protocol.additionalDocuments ? protocol.additionalDocuments :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div *ngIf="viewField" class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Outputs' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="outputs"
                  maxlength="254"
                  *ngIf="edit"
                  required
                  placeholder="{{ 'Enter outputs' | translate }}"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.outputs }">{{ protocol.outputs ? protocol.outputs :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Protocol Spectrum' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="protocolSpectrum"
                  maxlength="254"
                  *ngIf="edit"
                  required
                  placeholder="{{ 'Enter protocol spectrum' | translate }}"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.protocolSpectrum }">{{ protocol.protocolSpectrum ? protocol.protocolSpectrum :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Documentation' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="documentation"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter documentation' | translate }}"
                  required
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.documentation }">{{ protocol.documentation ? protocol.documentation :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Comments' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="comments"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter comments' | translate }}"
                  required
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.comments }">{{ protocol.comments ? protocol.comments :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div *ngIf="viewField" class="form-group pr-3 half-flex">
                <label>{{ 'Email Comments' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="emailComment"
                  maxlength="254"
                  *ngIf="edit"
                  required
                  placeholder="{{ 'Enter email comments' | translate }}"
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.emailComment }">{{ protocol.emailComment ? protocol.emailComment :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Tariff Codes' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="tariffCodes"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter tariff codes' | translate }}"
                  required
                />
                <div *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.tariffCodes }">{{ protocol.tariffCodes ? protocol.tariffCodes :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="text-right pb-3">
              <button type="button" class="btn btn-secondary mr-3" [disabled]="saving" *ngIf="edit" (click)="cancel()">{{ 'Cancel' | translate }}&nbsp;
                <i class="fa fa-times"></i>
              </button>
              <button
                type="button"
                class="btn btn-main"
                *ngIf="edit"
                [disabled]="protocolForm.invalid"
                (click)="update()"
              >{{ 'Save' | translate }}&nbsp;
                <i class="fa fa-save"></i>
              </button>
            </div>
          </div>
        </ng-template>
      </ngb-tab>
    </ngb-tabset>
  </div>
</div>


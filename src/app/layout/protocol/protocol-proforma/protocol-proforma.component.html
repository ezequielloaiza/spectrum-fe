<div class="container bootstrap snippet pl-5 pr-3">
  <div class="row">
    <ngb-tabset (tabChange)="beforeChangeProforma($event)">
      <ngb-tab id="{{supplier.idSupplier}}" *ngFor="let supplier of suppliers">
        <ng-template ngbTabTitle><b>{{ supplier.companyName }}</b></ng-template>
        <ng-template ngbTabContent>
          <div class="border-tab" [formGroup]="protocolForm">
            <div class="text-right pb-3">
              <button type="button" class="btn btn-main mr-3" *ngIf="!edit" (click)="enableEdit()">{{ 'Edit' | translate }}
                <i class="fa fa-edit"></i>
              </button>
              <button type="button" class="btn btn-success btn-xs" *ngIf="!edit" [disabled]="!download" (click)="downloadProtocol()">{{ 'Download PDF' | translate }}
                <i class="fa fa-download"></i>
              </button>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Spectrum Proforma' | translate }}</label>
                <div *ngIf="edit" class="mb-2 mr-sm-2 mb-sm-0">
                  <div class="custom-control-inline">
                    <div class="custom-control custom-radio">
                      <input type="radio" id="customRadio1" name="spectrumProforma" class="custom-control-input" (change)="assignSpectrumProforma(true)" [checked]="protocol ? protocol.spectrumProforma : false">
                      <label class="custom-control-label" for="customRadio1">{{ 'Yes' | translate }}</label>
                    </div>
                    <div style="margin-left: 10px;" class="custom-control custom-radio">
                      <input type="radio" id="customRadio2" name="spectrumProforma" class="custom-control-input" (change)="assignSpectrumProforma(false)" [checked]="protocol ? !protocol.spectrumProforma : true">
                      <label class="custom-control-label" for="customRadio2">{{ 'No' | translate }}</label>
                    </div>
                  </div>
                </div>
                <div class="truncate" *ngIf="!edit && protocol.spectrumProforma === true">
                  <span translate>{{ 'Yes' }}</span>
                </div>
                <div class="truncate" *ngIf="!edit && !protocol.spectrumProforma && protocol.spectrumProforma !== null">
                  <span translate>{{ 'No' | translate }}</span>
                </div>
                <div class="truncate" *ngIf="!edit && protocol.spectrumProforma === null">
                  <span translate>{{ 'Unassigned' | translate }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Additional Documents' | translate }}</label>
                <div>
                  <textarea style="overflow-x: hidden;"
                    type="text"
                    class="form-control"
                    formControlName="additionalDocuments"
                    placeholder="{{ 'Enter additional documents' | translate }}"
                    *ngIf="edit"
                  ></textarea>
                </div>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.additionalDocuments }">{{ protocol.additionalDocuments ? protocol.additionalDocuments :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div *ngIf="viewField" class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Outputs (Send information to Spectrum team)' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="outputs"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter outputs (send information to Spectrum team)' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.outputs }">{{ protocol.outputs ? protocol.outputs :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Protocol From Spectrum' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="protocolSpectrum"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter protocol from spectrum' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.protocolSpectrum }">{{ protocol.protocolSpectrum ? protocol.protocolSpectrum :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Maximum Amount to Declare' | translate }}</label>
                <div *ngIf="edit && editField" class="input-group-append">
                  <span class="input-group-text">$</span>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="maximumAmount"
                    *ngIf="edit && editField"
                    placeholder="{{ 'Enter maximum amount to declare' | translate }}"
                  />
                </div>
                <div class="truncate" *ngIf="!edit || !editField">
                  <span translate [ngClass]="{ unassigned: !protocol.maximumAmount }">{{ protocol.maximumAmount ? (protocol.maximumAmount | currency : "USD $") :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Documentation that must accompany the delivery and proforma invoice' | translate }}</label>
                <textarea style="overflow-x: hidden;"
                  type="text"
                  class="form-control"
                  formControlName="documentation"
                  *ngIf="edit"
                  placeholder="{{ 'Enter documentation that must accompany the delivery and proforma invoice' | translate }}"
                ></textarea>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.documentation }">{{ protocol.documentation ? protocol.documentation :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Fixed Prices for Proforma Invoice' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="fixedPrices"
                  maxlength="254"
                  *ngIf="edit && editField"
                  placeholder="{{ 'Enter fixed prices for proforma invoice' | translate }}"
                />
                <div class="truncate" *ngIf="!edit || !editField">
                  <span [ngClass]="{ unassigned: !protocol.fixedPrices }">{{ protocol.fixedPrices ? protocol.fixedPrices :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'Comments' | translate }}</label>
                <textarea style="overflow-x: hidden;"
                  type="text"
                  class="form-control"
                  formControlName="comments"
                  *ngIf="edit"
                  placeholder="{{ 'Enter comments' | translate }}"
                ></textarea>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.comments }">{{ protocol.comments ? protocol.comments :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="d-flex">
              <div *ngIf="viewField" class="form-group pr-3 half-flex">
                <label>{{ 'Email Comments' | translate }}</label>
                <textarea style="overflow-x: hidden;"
                  type="text"
                  class="form-control"
                  formControlName="emailComment"
                  *ngIf="edit"
                  placeholder="{{ 'Enter email comments' | translate }}"
                ></textarea>
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.emailComment }">{{ protocol.emailComment ? protocol.emailComment :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
              <div class="form-group pr-3 half-flex">
                <label>{{ 'HS Code' | translate }}</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="tariffCodes"
                  maxlength="254"
                  *ngIf="edit"
                  placeholder="{{ 'Enter HS Code' | translate }}"
                />
                <div class="truncate" *ngIf="!edit">
                  <span [ngClass]="{ unassigned: !protocol.tariffCodes }">{{ protocol.tariffCodes ? protocol.tariffCodes :
                    'Unassigned' | translate
                  }}</span>
                </div>
              </div>
            </div>
            <div class="text-right pb-3">
              <button type="button" class="btn btn-secondary mr-3" [disabled]="saving" *ngIf="edit" (click)="cancel()">{{ 'Cancel' | translate }}&nbsp;
                <i class="fa fa-times"></i>
              </button>
              <button
                type="button"
                class="btn btn-main"
                *ngIf="edit"
                [disabled]="saving"
                (click)="update()"
              >{{ 'Save' | translate }}&nbsp;
                <i class="fa fa-save"></i>
              </button>
            </div>
          </div>
        </ng-template>
      </ngb-tab>
    </ngb-tabset>
  </div>
</div>

